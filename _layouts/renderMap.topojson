---
---
{% assign sorted_pins = (site.pins | sort: 'date') | reverse %}
{% if page.showJS %}eqfeed_callback({% endif %}{
  "type": "FeatureCollection",
  "features": [{% for pin in sorted_pins limit:100 %}
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          {% if pin.longitude %}{{ pin.longitude }}{% elsif pin.Longitude %}{{ pin.Longitude }}{% endif %},
          {% if pin.latitude %}{{ pin.latitude }}{% elsif pin.Latitude %}{{ pin.Latitude }}{% endif %}
        ]
      },
      "properties": {
        "username": "{% if pin.githubHandle %}{{ pin.githubHandle }}{% elsif pin.githubhandle %}{{ pin.githubhandle }}{% endif %}",
        "index": {{ forloop.index }},
        "date": "{{ pin.date }}"
      }
    }{% if forloop.last == false %},{% endif %}{% endfor %}]
}{% if page.showJS %});{% endif %}
